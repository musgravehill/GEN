<!DOCTYPE html>
<!-- saved from url=(0091)http://www.netzener.net/index.php/project-articles/22-portable-variable-power-supply-part-2 -->
<html prefix="og: http://ogp.me/ns#" lang="en-gb" dir="en-gb"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   
	<!--<base href="http://www.netzener.net/index.php/project-articles/22-portable-variable-power-supply-part-2">--><base href=".">
	<meta name="author" content="netzener">
	<meta name="description" content="Projects for the electronics enthusiast">
	<meta name="generator" content="Joomla! - Open Source Content Management">
	<title>Portable Variable Power Supply - Part 2</title>
	<link href="http://www.netzener.net/templates/netzener/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">
	<link href="http://www.netzener.net/index.php/component/search/?Itemid=150&amp;catid=10&amp;id=22&amp;format=opensearch" rel="search" title="Search netZener.net" type="application/opensearchdescription+xml">
	<link href="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/simple-line-icons.css" rel="stylesheet">
	<link href="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/k2.css" rel="stylesheet">
	<link href="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/template.css" rel="stylesheet">
	<style>
div.mod_search93 input[type="search"]{ width:auto; }
	</style>
	<script type="application/json" class="joomla-script-options new">{"csrf.token":"bf6643695170c38980d040154c813602","system.paths":{"root":"","base":""}}</script>
	<script src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/jquery.min.js.Без названия"></script>
	<script src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/jquery-noconflict.js.Без названия"></script>
	<script src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/jquery-migrate.min.js.Без названия"></script>
	<script src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/k2.frontend.js.Без названия"></script>
	<script src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/mootools-core.js.Без названия"></script>
	<script src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/core.js.Без названия"></script>
	<script src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/caption.js.Без названия"></script>
	<!--[if lt IE 9]><script src="/media/system/js/html5fallback.js?bb80ae6419fbaf84d82b576d6ac2f1d5"></script><![endif]-->
	<script>
jQuery(window).on('load',  function() {
				new JCaption('img.caption');
			});
	</script>

   <meta http-equiv="Content-Type" content="text/html;_ISO">	
   <link rel="stylesheet" href="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/reset.css" type="text/css">
   <link rel="stylesheet" href="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/text.css" type="text/css">
   <link rel="stylesheet" href="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/960.css" type="text/css">
   <link rel="stylesheet" href="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/template_css.css" type="text/css">
<script src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/embed.js.Без названия" data-timestamp="1611426361577"></script><style></style><link rel="prefetch" as="style" href="https://c.disquscdn.com/next/embed/styles/lounge.50c6d245bed5cbae0aed0c3742f23ac0.css"><link rel="prefetch" as="script" href="https://c.disquscdn.com/next/embed/common.bundle.38ea27189bdb723eae3dabf5bc7b8c0b.js"><link rel="prefetch" as="script" href="https://c.disquscdn.com/next/embed/lounge.bundle.7d0042f424f2997419b72bbe31b9db1a.js"><link rel="prefetch" as="script" href="https://disqus.com/next/config.js"><script src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/count-data.js.Без названия"></script></head>

<body>
   <div class="container_12">
      <div class="grid_6 sitelogo">
         <h1>
         netZener.net         </h1>
      </div>	

               <div class="grid_6">
            		<div class="moduletable">
						<div class="search mod_search93">
	<form action="http://www.netzener.net/index.php/project-articles" method="post" class="form-inline" role="search">
		<label for="mod-search-searchword93" class="element-invisible"> </label> <input name="searchword" id="mod-search-searchword93" maxlength="200" class="inputbox search-query input-medium" type="search" size="20" placeholder="Search ..."> <button class="button btn btn-primary" onclick="this.form.searchword.focus();">Search</button>		<input type="hidden" name="task" value="search">
		<input type="hidden" name="option" value="com_search">
		<input type="hidden" name="Itemid" value="150">
	</form>
</div>
		</div>
	
         </div>
            <div class="clear"></div>

               <div class="grid_12">
            		<div class="moduletable-topmenu">
						<ul class="nav menu-topmenu mod-list">
<li class="item-101 default"><a href="http://www.netzener.net/index.php">Home</a></li><li class="item-138"><a href="http://www.netzener.net/index.php/projects">Projects</a></li></ul>
		</div>
	
         </div>
         <div class="clear"></div>
      
      		
               <div class="grid_12 breadcrumbs">
            		<div class="moduletable-breadcrumb">
						<div aria-label="breadcrumbs" role="navigation">
	<ul itemscope="" itemtype="https://schema.org/BreadcrumbList" class="breadcrumb-breadcrumb">
					<li class="active">
				<span class="divider icon-location"></span>
			</li>
		
						<li itemprop="itemListElement" itemscope="" itemtype="https://schema.org/ListItem">
											<a itemprop="item" href="http://www.netzener.net/index.php" class="pathway"><span itemprop="name">Home</span></a>
					
											<span class="divider">
							<img src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/arrow.png" alt="">						</span>
										<meta itemprop="position" content="1">
				</li>
							<li itemprop="itemListElement" itemscope="" itemtype="https://schema.org/ListItem">
											<a itemprop="item" href="http://www.netzener.net/index.php/project-articles" class="pathway"><span itemprop="name">Project Articles</span></a>
					
											<span class="divider">
							<img src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/arrow.png" alt="">						</span>
										<meta itemprop="position" content="2">
				</li>
							<li itemprop="itemListElement" itemscope="" itemtype="https://schema.org/ListItem" class="active">
					<span itemprop="name">
						Portable Variable Power Supply - Part 2					</span>
					<meta itemprop="position" content="3">
				</li>
				</ul>
</div>
		</div>
	
         </div>
         <div class="clear"></div>
      			 
      				
      <div class="grid_9">
         <div id="system-message-container">
	</div>

         <div class="item-page" itemscope="" itemtype="https://schema.org/Article">
	<meta itemprop="inLanguage" content="en-GB">
	
		
			<div class="page-header">
					<h2 itemprop="headline">
				Portable Variable Power Supply - Part 2			</h2>
									</div>
					
		
	
	
		
							<div class="pull-left item-image"> <img src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/cover-part2.png" alt="" itemprop="image"> </div>
			<div itemprop="articleBody">
		

<!-- JoomlaWorks "Disqus Comments (for Joomla)" (v3.7.0) starts here -->

<a id="startOfPage"></a>

<!-- Disqus comments counter and anchor link -->
<div class="jwDisqusArticleCounter">
    <span>
        <a class="jwDisqusArticleCounterLink" href="http://www.netzener.net/index.php/project-articles/22-portable-variable-power-supply-part-2#disqus_thread" title="Add a comment">0 Comments</a>
    </span>
    <div class="clr"></div>
</div>

<p>This is the second installment of the Portable Variable Power Supply article.&nbsp; In Part 1, I described in detail each building block of the Weikedz power supply kit and highlighted the strengths and weaknesses of the design.&nbsp; Now in Part 2, I'll show you how to use all of the information gained to adapt the Weikedz power supply for portable applications.</p>
<h4>Batteries for portable devices</h4>
<p><img src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/lionwholesale2.png" alt=""></p>
<p>My initial concern with this project was finding a reliable supplier of rechargeable cells that were small, light, easy to use, and cost effective. Turns out a totally different problem would lead me to the exact product and company I needed:</p>
<p>While I was working on this project, one of the battery packs failed on my DeWalt 12V drill/screwdriver. The thing cost me $90 bucks at Home Depot about 18 months ago so I was hoping to find a replacement pack for maybe $20 to $30. Ha. No such luck. The best I could do was $60 for a single pack from DeWalt.</p>
<p>For that price I might as well buy another screw driver.&nbsp; But then I thought, "There has to be a way I can avoid playing the manufacturers planned obsolescence game." So I ignored the dire warnings in bold large print on the manual and disassembled the failed battery pack. Wouldn't you know it was stuffed with three 18650 cells in series and a little charge control circuit board. Checking voltages on each revealed one cell with zero volts; open circuit.</p>
<p>A quick google search and I had thousands of hits. But one vendor popped to the top with exactly the cell I needed:&nbsp;<a href="http://www.liionwholesale.com/">liionwholesale.com</a></p>
<p>They had the exact part number I needed for just a few bucks. They processed my order on a Sunday (no kidding... Sunday), and shipped first thing Monday morning. The cell was a perfect fit and immediately restored my battery pack to operation. Now I don't have to avoid rechargeable tools because the manufacturers want exorbitant prices for a battery pack. The batteries used for the Portable Variable Power Supply project were ordered from liionwholesale.com. Give them a try because they have a huge selection of protected, unprotected, low ESR, and high capacity cells. And some really good prices as well.</p>
<h4>A quick re-summary</h4>
<p>The point of the previous article was to deconstruct the WeiKedz Variable Power supply and examine each function block and component to describe what they do. There is very little informational in detail available on the WeiKedz product and I was hoping to cast more light on it, because I think it is a good product. It only suffers from some optimistic specifications. If you are unfamiliar with power supply design, or you needed a lot more information before giving the power supply a try, I hope the previous sections have helped.</p>
<p>I purchased the WeiKedz kit because I needed a variable power supply that could run on LG M26 2600mAH 18650 protected button top batteries. Four of these in series would provide a battery voltage between 12.8V and 16V with a nominal voltage around 14.8V. Protected cells make charging and discharging the cells easier than providing a balance charger. I only need the power supply to provide a variable 0 to 10V at 0 to 1A output current, so the lower ESR of unprotected cells wasn't an advantage in my application.</p>
<p>The specifications I was hoping to achieve were:</p>
<p><strong>Input voltage: 14.8VDC nominal (12.8Vmin to 16.8Vmax)<br>Input current: 1A (max)<br>Output voltage: 0-10VDC nominal (0 to 12V max)<br>Output current: 4mA to 1A (adjustable)<br>Output regulation: 0.01%</strong></p>
<p>However if you remember from the introduction of Part 1, the WeiKedz power supply was designed to be powered from a transformer only. A negative 5V power supply generated from the transformer is used by the Error Amplifier, Current Limiter, and Current Pass functions. Running the WeiKedz supply on batteries without modification is not possible.</p>
<p>But as you'll see in the next sections, the solution to this problem was actually an easy one.&nbsp; So let's get started.</p>
<h4 class="step-title">1.&nbsp; Battery Mod - Rectifier Circuit</h4>
<p>To convert the Rectifier Circuit to battery operation, we first eliminate all of the components that aren't needed. This saves weight, reduces cost (i.e. unused parts can be used for another project), and makes space available for some new components.</p>
<p>The components that are not needed are:</p>
<ul>
<li>Rectifiers D1 through D4 (1N5408)</li>
<li>Resistor R1 (2.2K 1W)</li>
<li>Capacitor C1 (3300uF 50V)</li>
</ul>
<p><strong>Do not install the components listed above.</strong></p>
<p>Optional Components are:</p>
<ul>
<li>Positive 24V Regulator IC U4 (7824)</li>
<li>2-pin Connector J5</li>
<li>24V 100mA Fan</li>
</ul>
<p>I elected to skip the 24V regulator and fan as convection cooling would be sufficient for my purposes and the battery voltage will be too low to engage U4.&nbsp; If you think you'll need some extra cooling you will need to replace U4 with a Positive 12V regulator (Part Number 7812) and switch out the 24V fan with a 12V equivalent.&nbsp; Just about any 40mm X 40mm fan with a 2-Pin connector will work, or just solder in the fan leads.&nbsp; Just keep in mind that the fan will consume around 100mA which will shorten battery run-time.&nbsp; A simple electronic thermostat will help and would be a good design exercise for another time.</p>
<p>The components I added were:</p>
<ul>
<li>2A Fast Blow Fuse (5mm X 20mm)</li>
<li>Through-Hole Fuse Holder (5mm X 20mm)</li>
<li>555-based Astable Timer</li>
<li>DROK V/I Panel Meter</li>
</ul>
<p>In order to gain a bit more headroom on the -5V supply, I replaced the 5.6V zener D5 (1N752) with a 5.1V zener (1N751). This change is optional but recommended if you have the part on hand.</p>
<p><img src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/battery-section.jpg" alt=""></p>
<p>The changes made to the Rectifier Circuit are shown in the schematic above.</p>
<p>The 555 astable timer is used to replace the positive-to-negative charge switching done by the transformer and bridge rectifier. When the output of the 555 timer is high, capacitor C2 is charged to +12V through diode D5 and resistor R2, while capacitor C3 is discharging into the -5V regulator circuit.&nbsp; When the output of the 555 timer is low, R2 is shorted to ground which reverses the polarity of capacitor C2 and discharges C2 into capacitor C3 through resistor R2 and diode D6. C2 charges C3 to -9V with respect to ground before the cycle repeats. The resulting sawtooth voltage on capacitor C3 is regulated to -5.6V by R3 and Zener diode D2 and sent on to the function blocks that need -5V.</p>
<p><img src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/positive-to-negative.bmp" alt=""></p>
<p>I built the Astable Timer (photos below) on a small piece of prototyping board using the following design procedure:</p>
<p><img src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/revised-timer-image-3.png" alt=""></p>
<p>Most electrolytic capacitor manufacturers provide design data for 60Hz, 120Hz and 1000Hz, so I chose an astable frequency of 1Khz with near 50% duty cycle to minimize the ripple voltage in the converter.</p>
<p>I used the astable circuit from the datasheet and calculated the values for C24, R23 and R24 according to the equations:</p>
<p><strong>T1 = 0.693 * ( R23 + R24 ) * C24&nbsp;</strong>where T1 is the charge time for C24</p>
<p><strong>T2 = 0.693 * R24 * C24&nbsp;</strong>where T2 is the discharge time for C24</p>
<p><strong>F = 1 / ( T1 + T2 )&nbsp;</strong>where F is the astable frequency</p>
<p><strong>DC = R24 / ( R23 + ( 2 * R24 ))</strong>&nbsp;where DC is the astable duty cycle</p>
<p>I wanted to keep current consumption on the astable timer low to keep battery drain to a minimum so the combined values of R23 and R24 need to be fairly large. TI includes a nice nomograph that shows the capacitor value needed for a certain frequency and resistor combination. I used that to choose a .01uF value for C24 because the combination of R23/R24 would be near 100K Ohms. Arranging the equation for T1 above to solve for R23/R24 and substituting known values gave:</p>
<p><strong>R23 + R24 = T1 / ( 0.693 * C24) = .0005 / ( 0.693 * .00000001 ) = 72,150 Ohms</strong></p>
<p>The .0005 term for T1 is the cycle time for 1000 Hz (.001 seconds) divided by two for charge time which makes T1 equal to .0005 seconds.</p>
<p>The astable schematic and duty cycle equation shows that a 50% duty cycle requires a large resistor value for R24 and a small resistor value for R23. However, R23 can not be so small that power dissipation in the 555 is exceeded. So I first selected the value for R24 by consulting the EIA E12 resistor chart which describes the most common resistor values I have in inventory, and looked for the resistor value closest to 72,150 Ohms&nbsp;<u>without going over</u>. That value was 68K Ohms. Subtracting 68000 Ohms from 72150 Ohms left 4150 Ohms for R23. Consulting EIA E12 again, I chose the closest resistor value&nbsp;<u>above</u>&nbsp;4150 Ohms, which was 4.7K, and used that for R23.</p>
<p>Checking the resistor values with the equations shows:</p>
<p><strong>T1 = 0.693 * ( R23 + R24 ) * C24 = 0.693 * ( 4700 + 68000 ) * .00000001 = .000504 seconds</strong></p>
<p><strong>T2 = 0.693 * R24 * C24 = 0.693 * 68000 * .00000001 = .000471 seconds</strong></p>
<p><strong>F = 1 / ( T1 + T2 ) = 1 / ( .000504 + .000471 ) = 1026 Hz</strong></p>
<p><strong>DC = R24 / ( R23 + ( 2 * R24 )) = 68000 / ( 4700 + ( 2 * 68000 )) = 0.48 or 48%</strong></p>
<p>These results are almost perfect for the purpose. C11 and C12 in the schematic are bypass capacitors recommended in the 555 datasheet (attached below).</p>
<p>To prevent internal short circuits from damaging the battery, wiring, or circuit board components I recommend installing a Bussman 250V 2A fast acting fuse (5mm X 20mm, Part number GMA-2R) and fuse clips on the PCB as shown above. I used the pads for rectifier D1 to mount the fuse clips. Bussman recommends that the DC voltage applied to their fuses be no more than 1/2 the AC rating, or 125V, to ensure fast clearing of a fault. The maximum battery voltage of 16.8V is well below that. The cold DC resistance of the GMA-2R is 0.066 Ohms which is about the same is an equivalent automotive fuse. If you feel more comfortable using a purely DC rated fuse, feel free to substitute an automotive fuse for the glass fuse I used.</p>
<p><img src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/revised-timer-top-3.png" alt=""></p>
<p>The DROK panel meter will be covered in a later step.&nbsp; The next step will cover the construction and installation of the astable timer.</p>
<p>The LM555 Datasheet is <strong><a href="http://www.netzener.net/images/portapower/lm555.pdf" target="_blank" rel="noopener noreferrer">&gt;&gt;&gt; HERE &lt;&lt;&lt;</a></strong></p>
<p>&nbsp;</p>
<h4 class="step-title">2.&nbsp; Battery Mod - Astable Timer Construction</h4>
<p><img src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/astable-timer-schematic.bmp" alt=""></p>
<p>The astable timer I built is constructed on a small piece of prototype board. You can use anything you have on hand and you can use any layout that works for you. Just follow the schematic diagram included above. I've included a top/bottom layout diagram below for the astable timer I built to use as a guide.</p>
<p><img src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/astable-timer-board.bmp" alt=""></p>
<p>After the astable time is constructed, the trace connecting R2 to rectifier D4 must be cut in the location shown below. Then solder in the astable timer onto the traces indicated below. Small pieces of solid #22 or #24 hookup wire can be used for the V+ and GND leads when the astable timer is installed in the C1 position. But a 2" length of stranded #24 or smaller hookup wire will be needed for the OUT signal to reach R2.</p>
<p><img src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/astable-timer-trace.png" alt=""></p>
<p><img src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/astable-timer-trace-locations.png" alt=""></p>
<p>If you aren't planning on attaching a V/I panel meter to the power supply, solder in a #18 or larger jumper wire in the location shown below. Otherwise, install the DROK panel meter before testing the astable timer (see the Multi-Meter Mod in section 6 below).</p>
<p><img src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/battery-power-connections.bmp" alt=""></p>
<p>When completed, attach a 12V to 16V power source to J1 as indicated above. Check the voltage at the indicated test point to verify that the timer is working correctly.</p>
<h4 class="step-title">&nbsp;</h4>
<h4 class="step-title">3.&nbsp; Battery Mod - Reference Circuit</h4>
<p><img src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/reference-section-mod.bmp" alt=""></p>
<p>The minimum battery voltage for the 18650 pack I'll be using is 12V. The TL081 OpAmp IC saturation voltage is 1.5V below V+ which is not enough headroom for an 11.2V reference voltage. And I was not convinced that the 5.6V zener was the best choice for temperature compensation. So I elected to replace the 5.6V zener diode included in the WeiKedz kit with a 5.1V zener from my inventory. This will provide a 10.2V reference voltage which is just enough headroom as the battery pack reaches cutoff.</p>
<p><strong>Replace D1 with a 5.1V zener part number 1N751</strong></p>
<p>The 1N751 Datasheet is <strong><a href="http://www.netzener.net/images/portapower/1n752.pdf" target="_blank" rel="noopener noreferrer">&gt;&gt;&gt; HERE &lt;&lt;&lt;</a></strong></p>
<p>&nbsp;</p>
<h4 class="step-title">4.&nbsp; Battery Mod - Error Amplifier Circuit</h4>
<p><img src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/error-amp-section-mod.bmp" alt=""></p>
<p>The nominal battery voltage for the 18650 pack I'll be using is 14.8V. Accounting for TL081 saturation voltage (1.5V below V+) and the voltage drop in the power section (1.4V), the maximum output voltage is 11.9V. The gain of the Error Amplifier need to be changed to account for the different V+ voltages (13.8V on battery vs 32.5V on transformer power). Instead of a gain of 3, I needed a gain of:</p>
<p><strong>Acl = Vout / Vref = 12V / 10V = 1.2</strong></p>
<p>The non-inverting amplifier gain equation is:</p>
<p><strong>Acl = 1 + ( R12 / R11 )</strong></p>
<p>To avoid changing the frequency response of the Error Amplifier, resistor R12 should be left at 56K. Rearranging the gain equation to solve for R11:</p>
<p><strong>R11 = R12 / ( Acl - 1 )</strong></p>
<p>Substituting known values makes R11 equal to:</p>
<p><strong>R11 = 56000 / ( 1.2 - 1 ) = 280,000 Ohms</strong></p>
<p>The nearest IEA E12 resistor value is 270K Ohms.</p>
<p><strong>Replace R11 (27K Ohm 1/4W) with a 270K Ohm 1/4W resistor.</strong></p>
<p>For a reference input voltage between 0V and 10V, the power supply output voltage will vary between:</p>
<p><strong>Vout = Acl * Vref</strong></p>
<p><strong>Vout = 1.2 * 0 = 0V</strong></p>
<p><strong>Vout = 1.2 * 10 = 12V</strong></p>
<h4 class="step-title">&nbsp;</h4>
<h4 class="step-title">5.&nbsp; Battery Mod - Current Limiter Circuit</h4>
<p><img src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/current-limit-mod.bmp" alt=""></p>
<p>For my purposes I only wanted a maximum of 1A output current. But the current limit control is scaled for 0 to 3A which means that only the first 1/3 of potentiometer rotation would be useful, and if rotated further would allow a higher output current than desired. So the current limit scaling resistor R18 needs to be changed.</p>
<p>The voltage on the current sense resistor R7 depends on the power supply output current. The minimum current limit according to WeiKedz is 4mA and the maximum current for the battery modified power supply is 1A. So the voltage on R7 is:</p>
<p><strong>V = I * R</strong></p>
<p><strong>Vlow = 0.004A * 0.47 Ohms = .002V</strong></p>
<p><strong>Vhigh = 1A * 0.47 Ohms = 0.47V</strong></p>
<p>The output voltage of potentiometer P2 needs to vary between 2mV and 470mV.</p>
<p>If R17 is left at 33 Ohms and the voltage out of the Reference Circuit is 10.2V, then the value of R18 needs to be:</p>
<p><strong>R18 = (( Vref / Vhigh ) - 1 ) * ( R17 + P2 ) = (( 10.2 / 0.47 ) - 1 ) * ( 33 + 10000 ) = 207,704 Ohms</strong></p>
<p>The nearest EIA E12 resistor value is 200K Ohms.</p>
<p><strong>Replace R18 with a 200K Ohm 1/4W resistor.</strong></p>
<p>Using this value to check minimum current limit results in:</p>
<p><strong>Iout = ( Vref * R17 ) / (( R17 + P2 + R18) * R7 )</strong></p>
<p><strong>Iout = ( 10.2 * 33 ) / (( 33 + 10000 + 200000 ) * 0.47 ) = .00034 or 3.4 mA</strong></p>
<p>This is close enough to allow the power supply output current to be varied between 3mA and 1A.</p>
<h4 class="step-title">&nbsp;</h4>
<h4 class="step-title">6.&nbsp; Multimeter Mod - Adding a VI Display</h4>
<p><img src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/cover-page-1a.jpg" alt=""></p>
<p>Adding a panel meter to the power supply is a simple matter of soldering in the power, voltage monitor, and current monitor leads at specific pads on the WeiKedz variable power supply PCB. I wanted both a voltage and current display. And I like the look of red/green/blue 7-segment LED's instead of the bland grey of LCD displays, and I didn't want to get too fancy with color LCD meters that measure a whole bunch of parameters. After looking around on Amazon, I liked the DROK V/I DC 0-100V 10A panel meter (<a href="https://www.amazon.com/DROK-Digital-Current-Display-Battery/dp/B00EXCUHJU/ref=sr_1_32?keywords=drok+10A&amp;qid=1567148569&amp;s=gateway&amp;sr=8-32" target="_blank" rel="noopener noreferrer">Amazon ASIN B00EXCUHJU</a>) best because it has an offset null and span adjustment for current measurements.</p>
<p><img src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/drok-display-2.png" alt=""></p>
<p>The documentation provided by DROK has not made much sense to me and doesn't appear to be accurate. For example, the documentation for the panel meter I bought suggests that the power leads are isolated from the voltage and current monitor leads. However that is not that case. The meter power ground and current monitor negative lead are internally connected together. And the voltage monitor lead is reference to the power ground lead. So the meter power supply is not electrically isolated from the power supply being monitored as shown in the documentation. Instead, the meter power, load voltage being monitored, and load current being monitored will share the same ground.</p>
<p>As it turns out, though, this panel meter is easy connect to the WeiKedz power supply and works great.</p>
<p><img src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/drok-wiring.png" alt=""></p>
<p>1. Solder the thin red meter lead to the battery + input PCB trace as indicated in the diagram above. The meter + lead will use the unoccupied PCB pad assigned to rectifier D2 cathode.</p>
<p>2. Solder the thin black meter lead to the battery - input PCB trace as indicated in the diagram above. The meter - lead will use the unoccupied PCB pad assigned to rectifier D2 anode.</p>
<p>3. Solder the thin yellow voltage monitor lead to the power supply + output PCB trace as indicated in the diagram above. The voltage monitor lead will be soldered directly to diode D11 cathode.</p>
<p>4. Solder the thick red current monitor + lead to the power supply GND trace as indicated in the diagram above. The current monitor + lead will use the unoccupied PCB pad assigned to rectifier D4 anode.</p>
<p>5. Solder the thick black current monitor - lead to the battery - input PCB trace as indicated in the diagram above. The current monitor - lead will use the unoccupied PCB pad assigned to rectifier D4 cathode.</p>
<p>To test, verify that voltage potentiometer P1 is fully counter-clockwise and current potentiometer P2 is fully clockwise. Attach a 10 Ohm 10W load resistor to the power supply output. Attach a 14.8V battery positive lead to the B+ terminal on J1 and the battery negative lead to the B- terminal on J1. The panel meter will power on and display 0V/0A. Slowly rotate the voltage potentiometer clockwise and verify that the voltage and current measurements are close to the following:</p>
<p>Voltage Current</p>
<p>1.00 0.10<br>2.00 0.20<br>3.00 0.30<br>4.00 0.40<br>5.00 0.50<br>6.00 0.60<br>7.00 0.70<br>8.00 0.80<br>9.00 0.90<br>10.00 1.00</p>
<p>The DROK panel meter has a small trimmer resistor on the back that can be used to adjust the current measurement to more closely match the above table if needed.</p>
<h4 class="step-title">&nbsp;</h4>
<h4>7.&nbsp; Battery Charger</h4>
<p>I installed the battery pack in a case with the power supply PCB.&nbsp; To charge the supply without having to disassemble the case each time I purchased a Tenergy TLP4000 Universal Li-ion/Li-Po battery charger from Amazon (<a href="https://www.amazon.com/gp/product/B007MD54NQ" target="_blank" rel="noopener noreferrer">ASIN&nbsp;B007MD54NQ</a>).&nbsp; The "protected" cells I used contain their own internal charge/discharge controller so a separate balance circuit wasn't needed.&nbsp; If you use "unprotected" cells, you will need to purchase a balance charge/discharge PCB to avoid unfortunate accidents during use.&nbsp; You can use any battery charger you wish as long as it is designed for the 14.8V pack voltage.</p>
<p><img src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/tenergy-photo.png" alt=""></p>
<p>To connect the Tenergy charger to the power supply, I removed the alligator clips provided with the charger and soldered in a 5mm/2mm DC power plug (Mouser 490-PP3-002A) rated at 24VDC and 5A.&nbsp; Then I installed a panel mounted 5mm/2mm DC power jack (Mouser 490-PJ-005A) into the case.&nbsp; The DC input jack is a 3-wire type that disconnects the power supply from the batteries when charging.&nbsp; You can use any DC plug/jack you wish as long as the voltage rating is 24VDC and the current rating is 1A or higher.&nbsp; &nbsp;But be extra careful wiring the charging circuit so that charger, battery, and power supply get connected in the proper polarity is show in the illustration below.&nbsp; Be sure to check the manufacturers datasheet for the DC jack you use to make sure the battery and power supply connections are correct.&nbsp; Pins 1, 2, and 3 are different for each manufacturer.&nbsp; If in doubt, you can verify the pin-out with an Ohm meter.&nbsp; I've included the datasheet for the plug and jack I used below.</p>
<p><img src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/charger-connect.png" alt="">&nbsp;</p>
<p class="step-title">The DC Input Plug datasheet is <strong><a href="http://www.netzener.net/images/portapower/pp3-002a-1313117.pdf" target="_blank" rel="noopener noreferrer">&gt;&gt;&gt; HERE &lt;&lt;&lt;</a></strong></p>
<p class="step-title">The DC Input Jack datasheet is <strong><a href="http://www.netzener.net/images/portapower/pj-005a-1312187.pdf" target="_blank" rel="noopener noreferrer">&gt;&gt;&gt; HERE &lt;&lt;&lt;</a></strong></p>
<p class="step-title">&nbsp;</p>
<h4 class="step-title">Conclusion</h4>
<p>The WeiKedz variable power supply is a good kit that includes a good collection of parts for experimenting, including a large heatsink, fan, and regulator IC. The circuit is well designed and only suffers from voltage and current specifications that are two optimistic. When operated within realistic parameters, the power supply performs extremely well. It comes as a kit which is excellent for hacking. And for $10, the kit is a really good value.</p>
<p>If you've stuck with me this far, I hope the information presented has been helpful.</p>
<p>Good Luck!</p>
<p>NetZener</p> 
<!-- Disqus comments block -->
<div class="jwDisqusForm">
    
            <div id="disqus_thread"><iframe id="dsq-app616" name="dsq-app616" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/saved_resource.html" style="width: 1px !important; min-width: 100% !important; border: none !important; overflow: hidden !important; height: 0px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe></div>
            <script>
                var disqus_developer = '0';
                var disqus_config = function(){
                    this.page.url = 'http://www.netzener.net/index.php/project-articles/22-portable-variable-power-supply-part-2';
                    this.page.identifier = '94a9cf9431_id22';
                    this.language = '';
                };
                (function() {
                    var d = document, s = d.createElement('script');
                    s.src = 'https://wwwnetzenernet.disqus.com/embed.js';
                    s.setAttribute('data-timestamp', +new Date());
                    (d.head || d.body).appendChild(s);
                })();
            </script>
            <noscript>
                <a href="https://wwwnetzenernet.disqus.com/?url=ref_noscript">View the discussion thread.</a>
            </noscript>
                <div id="jwDisqusFormFooter">
        <a id="jwDisqusBackToTop" href="http://www.netzener.net/index.php/project-articles/22-portable-variable-power-supply-part-2#startOfPage">
            back to top        </a>
        <div class="clr"></div>
    </div>
</div>

<div class="clr"></div>


<!-- JoomlaWorks "Disqus Comments (for Joomla)" (v3.7.0) ends here -->
	</div>

	
							</div>

      </div>
				
               <div class="grid_3">
            		<div class="moduletable-latest">
							<h3>Recent Articles</h3>
						<ul class="latestnews-latest mod-list">
	<li itemscope="" itemtype="https://schema.org/Article">
		<a href="http://www.netzener.net/index.php/project-articles/22-portable-variable-power-supply-part-2" itemprop="url">
			<span itemprop="name">
				Portable Variable Power Supply - Part 2			</span>
		</a>
	</li>
	<li itemscope="" itemtype="https://schema.org/Article">
		<a href="http://www.netzener.net/index.php/project-articles/21-portable-variable-power-supply-part-1" itemprop="url">
			<span itemprop="name">
				Portable Variable Power Supply - Part 1			</span>
		</a>
	</li>
	<li itemscope="" itemtype="https://schema.org/Article">
		<a href="http://www.netzener.net/index.php/project-articles/17-ultrasonic-range-finder" itemprop="url">
			<span itemprop="name">
				Ultrasonic Range Finder			</span>
		</a>
	</li>
	<li itemscope="" itemtype="https://schema.org/Article">
		<a href="http://www.netzener.net/index.php/project-articles/15-3-transistor-short-wave-radio" itemprop="url">
			<span itemprop="name">
				3 Transistor Short Wave Radio			</span>
		</a>
	</li>
	<li itemscope="" itemtype="https://schema.org/Article">
		<a href="http://www.netzener.net/index.php/project-articles/9-build-a-switched-mode-dual-variable-power-supply" itemprop="url">
			<span itemprop="name">
				Build a Switched Mode Dual Variable Power Supply			</span>
		</a>
	</li>
	<li itemscope="" itemtype="https://schema.org/Article">
		<a href="http://www.netzener.net/index.php/project-articles/10-one-tube-am-radio" itemprop="url">
			<span itemprop="name">
				One Tube AM Radio			</span>
		</a>
	</li>
	<li itemscope="" itemtype="https://schema.org/Article">
		<a href="http://www.netzener.net/index.php/project-articles/11-build-a-neon-goofy-lite" itemprop="url">
			<span itemprop="name">
				Build a Neon "Goofy-Lite"			</span>
		</a>
	</li>
	<li itemscope="" itemtype="https://schema.org/Article">
		<a href="http://www.netzener.net/index.php/project-articles/12-built-this-8-transistor-stereo-amplifier" itemprop="url">
			<span itemprop="name">
				Build this 8 Transistor Stereo Amplifier			</span>
		</a>
	</li>
</ul>
		</div>
	
         </div>
            <div class="clear"></div>

               <div class="grid_12">
            		<div class="moduletable-bottommenu">
						<ul class="nav menu-bottommenu mod-list">
<li class="item-135"><a href="http://www.netzener.net/index.php/contact">Contact</a></li></ul>
		</div>
	
         </div>
         <div class="clear"></div>
                      
               <div class="grid_12 footer">
            		<div class="moduletable">
						<div class="footer1">Copyright © 2021 netZener.net. All Rights Reserved.</div>
		</div>
	
         </div>
         <div class="clear"></div>
         </div>

                <!-- JoomlaWorks "Disqus Comments (for Joomla)" (v3.7.0) -->
                <script>var disqus_config = function(){this.language = '';};</script>
                <script id="dsq-count-scr" src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/count.js.Без названия" async=""></script>
            



<iframe style="display: none;" src="./!!!!!!!!!!!!!Portable Variable Power Supply - Part 2_files/saved_resource(1).html"></iframe></body><app-content ng-version="10.1.5"></app-content></html>