pcodeStaticJsonp10655([13],{1049:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getContainerSize=i(236).memoize(function(e){var t=i(916).querySelector("#"+e);return t?i(55).getElementInnerSize(t):{width:0,height:0}})},1050:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=[{pageId:106253,impId:113},{pageId:134625,impId:72}];function a(e){for(var t=0;t<n.length;t++)if(o(e,n[t].pageId,n[t].impId))return!0;return!1}function o(e,t,n){return!!i(18).isString(e)&&(e.indexOf("/meta/"+t)>-1&&e.indexOf("imp-id="+n)>-1)}function r(e,t){return e>0&&t>0?Math.round(t-e):0}t.logAdfoxControlTime=function(e,t){if(function(e,t){for(var i=0;i<n.length;i++)if(n[i].pageId===e&&n[i].impId===t)return!0;return!1}(e,t))for(var o=performance.getEntriesByType("resource"),s=o.length-1;s>=0;s--)if(a(o[s].name)){var d=o[s],c={tcpHandshake:r(d.connectStart,d.connectEnd),dnsLookup:r(d.domainLookupStart,d.domainLookupEnd),ttfb:r(d.requestStart,d.responseStart),response:r(d.responseStart,d.responseEnd),duration:Math.round(d.duration)};i(8).logger.info(c,"ADFOX_CTRL_TIME",100);break}}},872:function(e,t,i){"use strict";var n=function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var a in t=arguments[i])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){this.dataRequestTime=void 0}return e.prototype.setConfig=function(e,t){if(e.uniqueId||(e.uniqueId=i(129).generateHexString(10)),this.config=i(20).prepareRtbConfig(e),this.reloadTimeout=this.reloadTimeout||i(4).DEFAULT_RELOAD_TIMEOUT,Boolean(t)&&i(6).logRenderLabel(this.config.uniqueId,i(6).BlockRenderSteps.AdvManagerLoaderRender,t),i(8).logger.configure({labels:{pageId:i(413).getServiceName()},data:{pageId:e.pageId}}),this.config.data)return this.config.data.common&&this.config.data.common.reloadTimeout&&(this.reloadTimeout=Number(this.config.data.common.reloadTimeout)),i(6).stopLoggingTime(e.uniqueId),i(14).saveBundleType(e.data),void(this.data=this.config.data);this.config.initTime&&delete this.config.initTime;var n=i(916).querySelector("#"+e.renderTo);this.layoutConfig=new(i(412).LayoutConfig)(n),this.adUsageStorage=i(63).getAdUsageStorage(this.config),this.layoutConfig.set("ad_no",this.adUsageStorage.getCapturedCount())},e.prototype.loadData=function(t){var a=this;if(this.config.data)return i(6).setBlockData(this.config.uniqueId,{containsData:!0}),void t(this.config);if(this.canReloadData()||this.config.refresh){this.setDataRequestTime();var o,r={adfoxexp:this.config.adfoxexp};o="D"===i(20).parseBlockId(this.config.blockId).product?new(i(174).DirectTesttag)(r):new(i(242).RtbTesttag)(r);var s=i(1049).getContainerSize(this.config.renderTo),d=s.width,c=s.height;i(6).setBlockData(this.config.uniqueId,{isFirstScreen:Boolean(this.layoutConfig)&&this.layoutConfig.getIsFirstScreen()});var u={product:i(20).parseBlockId(this.config.blockId).product,testtag:o.toString(),pageId:this.config.pageId,blockImpId:this.config.blockImpId,grab:this.config.grab,extParams:this.config.extParams,extParam:this.config.extParam,ssSkipTokenLength:this.adUsageStorage.ssSkipTokenLength,availableWidth:d,availableHeight:c,searchText:this.config.searchText,lang:this.config.lang,geo:this.config.geo,disableHighlight:this.config.disableHighlight,layoutConfig:this.layoutConfig,additionalBanners:i(48).getAdditionalBanners()||this.config.additionalBanners||this.config.oldDirectSettings&&this.config.oldDirectSettings.additional_banners||"",experimentId:i(237).getExperimentId()||i(126).ssSkipTokenExpId,partnerStatId:this.config.partnerStatId,refresh:Boolean(this.config.refresh),rtbInDirect:this.config.rtbInDirect,nonce:this.config.cspNonce,cacheId:this.config.cacheId,useSsr:Boolean(this.config.useSsr)};i(126).isSsSkipToken?(i(6).logRenderLabel(this.config.uniqueId,i(6).BlockRenderSteps.AdvQueueTime),i(884).loadRtb(u,function(e){return a.parseServerDataFunction(e,t)})):e.queue.add(function(e){return a.getSkipToken(function(o){i(6).logRenderLabel(a.config.uniqueId,i(6).BlockRenderSteps.AdvQueueTime),i(884).loadRtb(n(n({},u),o),function(i){return a.parseServerDataFunction(i,function(i){t(i),e()})})})})}else t(n(n({isDataRefreshed:!0},this.config),{data:this.data}))},e.prototype.parseServerDataFunction=function(e,t){var a=parseInt(this.config.pageId,10),o=parseInt(this.config.blockImpId||"0",10);i(1050).logAdfoxControlTime(a,o),i(6).logRenderLabel(this.config.uniqueId,i(6).BlockRenderSteps.AdvLoadDone),e.common&&e.common.reloadTimeout&&(this.reloadTimeout=Number(e.common.reloadTimeout)),i(14).saveBundleType(e),this.data=e,t(n(n({isDataRefreshed:!0},this.config),{data:this.data}))},e.prototype.setDataRequestTime=function(){this.dataRequestTime=Number(new Date)},e.prototype.canReloadData=function(){return!this.dataRequestTime||Number(new Date)-this.dataRequestTime>1e3*this.reloadTimeout},e.prototype.getSkipToken=function(t){var n=this;if(e.isFirstBanner||i(126).isSsSkipToken)return e.isFirstBanner=!1,void t({});var a=i(16).getYaContext();a.AdvManagerStatic?t({skipToken:a.AdvManagerStatic.getSkipToken(this.config),skipBanner:a.AdvManagerStatic.getSkipBanner(this.config)}):a._callbacks.push(function(){var e=i(16).getYaContext();e.AdvManagerStatic?t({skipToken:e.AdvManagerStatic.getSkipToken(n.config),skipBanner:e.AdvManagerStatic.getSkipBanner(n.config)}):i(8).logger.error(new Error("advManagerStatic is missing"),"NoAMS_getSkipToken")})},e.isFirstBanner=!0,e.queue=new(i(377).Queue),e}();t.RtbDataLoader=a},884:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(886).getVersion();t.loadRtb=function(e,t){var a=function(e,t){e["pcode-version"]=i(56).getCodeVersion().toString(),e["flash-ver"]="0";var n=t.availableWidth||0;n>=1&&n<=1e4&&(e["available-width"]=n.toString());var a=t.availableHeight||0;return a>=1&&a<=1e4&&(e["available-height"]=a.toString()),t.skipToken&&(e["skip-token"]=t.skipToken),t.extParam&&(e["ext-param"]=t.extParam),t.statId&&(e["stat-id"]=t.statId),t.cacheId&&!t.refresh&&(e["cache-id"]=t.cacheId),i(105).isRtbInDirectExperiment({pageId:t.pageId,product:t.product,hasSearchText:Boolean(t.searchText)})&&(i(887).needRtbShadow(t.pageId)&&(e.rtbshadow="1"),t.blockImpId&&(e["partner-stat-id"]=t.blockImpId)),e}(i(238).getCommonParams(e),e),o=function(a){i(128).isMobile&&!i(181).isTurboPage(window)&&(a=function(e,t){var a=e&&e.settings,o=e&&e.direct&&e.direct.ads&&e.direct.ads.length,r=Boolean(o),s=8523===n,d=8524===n,c=8525===n,u=s||d||c,g=t.availableHeight||0;if(!(a&&r&&(g>200||0===g)&&u))return e;for(var l in a)if(a.hasOwnProperty(l)&&a[l]){var f=a[l].name;1===o&&s&&i(28).indexOf(["adaptive0418","adaptive"],f)>-1?a[l].name="posterHorizontal":1===o&&d&&i(28).indexOf(["motion","extensibleMobile"],f)>-1?a[l].name="posterHorizontal":c&&"vertical"===f&&(a[l].name="posterVertical")}return e}(a,e)),t(a)};i(379).createUrl(i(4).URLS.rtb,a,e,function(t,n){i(234).loadAd({url:t,headers:n,pageId:e.pageId,isRefresh:e.refresh,callback:o,nonce:e.nonce})})}},886:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.global=window,t.Ya=i(16).getYa(),t.getVersion=function(){return parseInt(t.Ya.codeVer)},t.getExp=function(){return t.Ya._exp},t.getConfirmUrl=function(){return t.Ya.confirmUrl}},887:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(23).isHostInList(window,i(23).excludeHosts(["yandexAll","vk","ok","avito","gismeteo"],i(23).topPartners)),a=[93830,93511,49688,92550,104220,113011,129744,137740,141769,143156,144204,84375,87940,97693,101833,126291],o=!1;t.disableRtbInOldDirectExperiment=function(){o=!0},t.isRtbInOldDirectExperiment=function(e,t){return!t&&!o&&!n},t.needRtbShadow=function(e){return!function(e,t){var n;return n="string"==typeof t?parseInt(t):t,i(170).includes(e,n)}(a,e)}},916:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.querySelector=function(e,t){if(void 0===t&&(t=document),!i(18).isString(e))return e;var n=e.slice(0,1),a=e.slice(1);switch(n){case"#":return i(188).getElementById(a);case".":return i(375).listToArray(i(385).getElementsByClassName(a,t));default:return i(12).map(i(375).listToArray((t||document).getElementsByTagName(e)),function(e){return e})}}}});